# lines that start with # are ignored as comments

# comments can ONLY start at the beginning of a line

# whitespace at the start of a line (spaces and tabs) are ignored
   # so you can indent things
   # however you want



# settings for a new application start with a phrase in quotes
# which is a pattern that occurs in the window for that application when
# it is brought to the foreground
# a line starting settings for a new applicaiton must start with "
# these application-matching string patterns can be at most 80 characters long
# there can be at most 64 different applications defined in one settings file
# Additional applications beyond the limit of 64 in one settings file
# will produce an Warning message at runtime and will be ignored
"Mozilla Firefox"


# TourBox controls are as follows
# TALL  SHORT  SIDE  TOP  UP  DOWN  LEFT  RIGHT  C1  C2  TOUR
# KNOB_TURN_CCW  KNOB_TURN_CW  KNOB_PRESS
# DIAL_TURN_CCW  DIAL_TURN_CW  DIAL_PRESS
# SCROLL_TURN_DOWN  SCROLL_TURN_UP  SCROLL_PRESS

# CCW and CW are counter-clockwise and clockwise for knob and dial
# C1 and C2 are the little round buttons above Tall and Short
# Tour is the moon-shaped button southwest of the Knob


# TourBox inputs are either single inputs or 2-input combos

# Note that only button PRESSES can be used in the first step of a combo
# (scroll, knob, and dial TURNS cannot be used).
# thus, there are 14x20 = 280 possible combos


# Command outputs are single keys, key combinations, or sequences of single keys
# and key combinations.  Each output key is a KEY_ macro name.  The full list
# of possible output key macros is in keyCodeList.txt






# single input mapping to single key
# when Top is pressed, output a left arrow key

TOP  KEY_UP



# single input mapping to a two-key combo
# the combo will be issued simultaneously
# thus, the order that the combo is listed doesn't matter
# when Short is pressed, it will output the standard Undo key command

SHORT  KEY_LEFTCTRL KEY_Z




# single input mapping to a sequence of combos and single keys
# > means send one key or combo before moving on to the next
# when C1 is pressed, access the Search History option from the History
# menu in Firefox, which has no direct key shortcut
# we Alt-S to open the menu, and then arrow down 3 times before pressing Enter

C1   KEY_LEFTALT KEY_S  >  KEY_DOWN  >  KEY_DOWN  >  KEY_DOWN  >  KEY_ENTER



# Note that the above sequence might not work, if Firefox can't absorb
# the key events that fast.  This, sleeps might be needed (to wait
# for the menu to open before sending the DOWN keys).
# Use SLEEP_ with a number of milliseconds to insert a sleep in the sequence.

# Map the Tour button to the same sequence from above, but with a 250 ms
# sleep to wait for the menu to open AFTER we send our S-key combo.

C1   KEY_LEFTALT KEY_S  > SLEEP_250  KEY_DOWN  >  KEY_DOWN  >  KEY_DOWN  >  KEY_ENTER




# a sequence printable keys can also be listed as a string,
# delimited by double quotes,
# which will be typed one-by-one
# Note that the string cannot contain a " character

# have C2 open a new tab and go to www.google.com

C2  KEY_LEFTCTRL KEY_T > "www.google.com" > KEY_ENTER



# have SIDE plus C2 type a phrase with quotes in it

SIDE C2  "She said, " > KEY_LEFTSHIFT KEY_APOSTROPHE > "Hello!" > KEY_LEFTSHIFT KEY_APOSTROPHE



# have SIDE plus TOP type a phrase with special characters

SIDE TOP "Hey you #$#@*&!"




# NOTE
#
# Sequences of key outputs can be up to 64 commands long.
# Commands can bey individual KEY_ codes, > symbols to send a combo,
# or individual keys in a quoted printable ASCII key sequence
# for example, the following sequence includes 10 commands:
#   KEY_SHIFT KEY_UP > "hello" > KEY_ENTER
#
# Sequences of commands longer than 64 will produce an error message
# at runtime and will be ignored
#
# Quoted strings often require multiple KEY_ codes per letter
# since there needs to be a send (>) after each letter, and also
# SHIFT key codes for capital letters and special symbols.




# Combo input mapping to a key combination
# While holding down Side, if we press C1, we go back one page

SIDE C1  KEY_LEFTALT KEY_LEFT



# For Knob/Dial/Scroll, we can also change the haptic and rotation speed
# settings, and this can be changed per direction and per combo.

# For example, KNOB_TURN_CW can have one haptic and rotation speed setting
# while the SIDE KNOB_TURN_CW combo can have a different haptic and rotation
# speed setting.  I.e., by holding down SIDE while turning the Knob
# we can not only output a different key sequence than when just turning the
# Knob by itself, but we can also have a different haptic strength and
# and different rotation speed.
# Rotation speed is how fast repeat commands are issued when the widget
# is turned farther in the same direction.
# Fast rotation means 30 outputs per rotation.
# Medium rotation means 15 outputs per rotation.
# Slow rotation means means 10 outputs per rotation.
# (These speeds are built-in to the TourBox hardware.)

# rotational controls default to Strong haptics and Fast rotations
# for rotational actions that have outputs assigned

# if a rotational control has NO output assigned, haptics will be Off
# thus, if you feel haptics for a control, it is outputting something

# Haptics are controlled with the H0  H1  or H2  modifiers for
# Off, Weak, or Strong haptics

# Rotation speed is controlled with R0  R1  or R2  modifiers for
# Slow, Medium, or Fast rotation



# Knob with default Strong haptics and Fast rotation
# set it to control zoom in/out in Firefox

KNOB_TURN_CW   KEY_LEFTCTRL KEY_LEFTSHIFT KEY_EQUAL
KNOB_TURN_CCW  KEY_LEFTCTRL KEY_MINUS



# If we modify the Knob with a Side-button combo (Side held while Knob
# turned), we might want different Haptics and Rotation speed so that
# the modified knob feels different (so we have feedback that we have
# changed modes)

# have our modified Knob use Weak haptics and Slow rotation
# when modified with Side, the Knob switches tabs in Firefox

SIDE KNOB_TURN_CW   H1 R0  KEY_LEFTCTRL KEY_TAB
SIDE KNOB_TURN_CCW  H1 R0  KEY_LEFTCTRL KEY_LEFTSHIFT KEY_TAB



# note that ANY button can be used to modify a Knob/Dial/Wheel and change
# its haptcs, rotation speed, and output, even pressing the Knob/Dial/Wheel
# itself (or pressing a Dial can modify a Knob)
# The OEM driver from TourBox doesn't expose this functionality, but it
# is there

# have the Knob behave differently when it is pressed and turned
# Use Weak haptics and Medium rotation speed
# Have Firefox jump from link to link in the page

KNOB_PRESS KNOB_TURN_CW   H1 R1  KEY_TAB
KNOB_PRESS KNOB_TURN_CCW  H1 R1  KEY_LEFTSHIFT KEY_TAB



# if there are multiple H or R modifiers, the last ones listed
# will override the earlier ones with no Warning message.

# have Scroll wheel scroll up and down the page with strong haptics
# and fast rotation
SCROLL_TURN_DOWN  H1 H0 R1 R0 R2 H2  KEY_DOWN
SCROLL_TURN_UP    H2 R2              KEY_UP






# only TURN actions can have haptic strength and rotation speed assigned
# if H or R modifiers are present for a non-TURN mapping, a Warning will
# be printed and those H or R modifiers will be ignored.

# While holding down Side, press Tall to go forward one page

SIDE TALL  H2 R1  KEY_LEFTALT KEY_RIGHT




# some bad mappings that will be skipped with error messages

# a TURN control leading a 2-button combo
KNOB_TURN_CW TOP  KEY_LEFT

# a 3-control combo
SIDE TOP KNOB_TURN_CW  KEY_LEFT

# a 4-control combo
SIDE TOP SHORT KNOB_TURN_CW  KEY_LEFT

# an invalid control 
BLAH  KEY_LEFT

# a missing TourBox control
KEY_LEFT_SHIFT KEY_LEFT

# a mapping with an incomplete quoted string
SHORT "bad test string

# a mapping with a quoted string that is way too long
SHORT TALL "a very very very very long test string that will not work"


# a mapping with a quoted string that is so long that it overflows our quoted
# string input buffer and gets cut off

SHORT SIDE "a very very very very long test string that will not work a very very very very long test string that will not work a very very very very long test string that will not work"




# now we can start a new section for a different application
# in this case, we switch to these settings whenever the window has "emacs:"
# in the title

# Note the first application with a string that matches is the one that is
# used.  Application order in the settings file matters.

# This can be a problem if emacs has a file open called "Firefox.txt", for
# example (which is why the longer phrase "Mozilla Firefox" is used above)

# emacs puts a : in the window title.  Use this to be as specific as possible



"emacs:"


# have the Tall button save the current file in emacs

TALL  KEY_LEFTCTRL KEY_X > KEY_LEFTCTRL KEY_S